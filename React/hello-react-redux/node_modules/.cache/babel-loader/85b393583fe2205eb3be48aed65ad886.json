{"ast":null,"code":"import C from '../Constant';\nvar virtual_db = [{\n  artist: \"Claude Monet\",\n  painting: \"Woman with a Parasol - Madame Monet and Her Son\",\n  year: 1875,\n  image: \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Claude_Monet_-_Woman_with_a_Parasol_-_Madame_Monet_and_Her_Son_-_Google_Art_Project.jpg/800px-Claude_Monet_-_Woman_with_a_Parasol_-_Madame_Monet_and_Her_Son_-_Google_Art_Project.jpg\"\n}, {\n  artist: \"Claude Monet\",\n  painting: \"Coquelicots, La promenade (Poppies)\",\n  year: 1873,\n  image: \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Claude_Monet_037.jpg/1280px-Claude_Monet_037.jpg\"\n}, {\n  artist: \"Claude Monet\",\n  painting: \"Woman with a Parasol, facing left\",\n  year: 1886,\n  image: \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Claude_Monet_023.jpg/800px-Claude_Monet_023.jpg\",\n  note: \"The pictured woman is Suzanne Hoschedé, daughter of Hoschedé, second wife of Claude Monet (1868-1899)\"\n}, {\n  artist: \"Claude Monet\",\n  painting: \"View at Rouelles, Le Havre\",\n  year: 1858,\n  image: \"https://upload.wikimedia.org/wikipedia/commons/4/44/Monet%2C_Claude_-_View_At_Rouelles%2C_Le_Havre_%281858%29.jpg\",\n  note: \"an early work showing the influence of Corot and Courbet\"\n}, {\n  artist: \"Claude Monet\",\n  painting: \"Snow at Argenteuil\",\n  year: 1875,\n  image: \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7a/Monet_Snow_at_Argenteuil_1875.jpg/1280px-Monet_Snow_at_Argenteuil_1875.jpg\"\n}, {\n  artist: \"Claude Monet\",\n  painting: \"Water Lilies\",\n  year: 1919,\n  image: \"https://upload.wikimedia.org/wikipedia/commons/9/9e/WLA_metmuseum_Water_Lilies_by_Claude_Monet.jpg\"\n}, {\n  artist: \"Claude Monet\",\n  painting: \"Stormy Sea in Étretat\",\n  year: 1883,\n  medium: \"oil on canvas\",\n  dimensions: \"100 cm × 81 cm\",\n  image: \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Monet-Mer_agit%C3%A9e_%C3%A0_Etretat-MBA-Lyon.jpg/1280px-Monet-Mer_agit%C3%A9e_%C3%A0_Etretat-MBA-Lyon.jpg\",\n  location: \"Musée des Beaux-Arts de Lyon\"\n}];\nvar ListDemoActionCreator = {\n  getLoadingAction: function getLoadingAction(show) {\n    return {\n      type: C.IS_LOADING,\n      isLoading: show\n    };\n  },\n  findMissingItemIndex: function findMissingItemIndex(items) {\n    var missings = [];\n    virtual_db.forEach(function (value, index, array) {\n      var found = false;\n      items.forEach(function (v, j, a) {\n        if (!found && v.painting === value.painting) {\n          found = true;\n        }\n      });\n      if (!found) missings.push(index);\n    });\n    var missingIndex = missings.length > 0 ? missings[0] : -1;\n    return missingIndex;\n  },\n  addListItem: function addListItem() {\n    var _this = this;\n\n    return function (dispatch, getState) {\n      dispatch(_this.getLoadingAction(true));\n      var listItems = getState().ListDemo.listItems;\n\n      var missingIndex = _this.findMissingItemIndex(listItems);\n\n      setTimeout(function () {\n        if (missingIndex >= 0) {\n          // duplicate state to be detectable during deep comparision of states at store, 2019.4.25\n          listItems = JSON.parse(JSON.stringify(listItems));\n          listItems.push(virtual_db[missingIndex]);\n          dispatch({\n            type: C.ADD_ITEM,\n            listItems: listItems\n          });\n          dispatch(_this.getLoadingAction(false));\n        } else {\n          dispatch(_this.getLoadingAction(-1));\n        }\n      }, 2000); // 1 sec delay to mimic asynchronous operation\n    };\n  },\n  delListItem: function delListItem(id) {\n    return {\n      type: C.DEL_ITEM,\n      item_id: id\n    };\n  }\n};\nexport default ListDemoActionCreator;","map":{"version":3,"sources":["D:\\Wolf\\Homo academicus\\yStudy on code - ReactJS\\hello-react-redux\\src\\actions\\ListDemoActionCreator.js"],"names":["C","virtual_db","artist","painting","year","image","note","medium","dimensions","location","ListDemoActionCreator","getLoadingAction","show","type","IS_LOADING","isLoading","findMissingItemIndex","items","missings","forEach","value","index","array","found","v","j","a","push","missingIndex","length","addListItem","dispatch","getState","listItems","ListDemo","setTimeout","JSON","parse","stringify","ADD_ITEM","delListItem","id","DEL_ITEM","item_id"],"mappings":"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","sourcesContent":["import C from '../Constant'\r\n\r\nconst virtual_db = [\r\n    {\r\n        artist: \"Claude Monet\",\r\n        painting: \"Woman with a Parasol - Madame Monet and Her Son\",\r\n        year: 1875,\r\n        image: \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/Claude_Monet_-_Woman_with_a_Parasol_-_Madame_Monet_and_Her_Son_-_Google_Art_Project.jpg/800px-Claude_Monet_-_Woman_with_a_Parasol_-_Madame_Monet_and_Her_Son_-_Google_Art_Project.jpg\",\r\n    },\r\n    {\r\n        artist: \"Claude Monet\",\r\n        painting: \"Coquelicots, La promenade (Poppies)\",\r\n        year: 1873,\r\n        image: \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/29/Claude_Monet_037.jpg/1280px-Claude_Monet_037.jpg\",\r\n    },\r\n    {\r\n        artist: \"Claude Monet\",\r\n        painting: \"Woman with a Parasol, facing left\",\r\n        year: 1886,\r\n        image: \"https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Claude_Monet_023.jpg/800px-Claude_Monet_023.jpg\",\r\n        note: \"The pictured woman is Suzanne Hoschedé, daughter of Hoschedé, second wife of Claude Monet (1868-1899)\",\r\n    },\r\n    {\r\n        artist: \"Claude Monet\",\r\n        painting: \"View at Rouelles, Le Havre\",\r\n        year: 1858,\r\n        image: \"https://upload.wikimedia.org/wikipedia/commons/4/44/Monet%2C_Claude_-_View_At_Rouelles%2C_Le_Havre_%281858%29.jpg\",\r\n        note: \"an early work showing the influence of Corot and Courbet\",\r\n    },\r\n    {\r\n        artist: \"Claude Monet\",\r\n        painting: \"Snow at Argenteuil\",\r\n        year: 1875,\r\n        image: \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7a/Monet_Snow_at_Argenteuil_1875.jpg/1280px-Monet_Snow_at_Argenteuil_1875.jpg\",\r\n    },\r\n    {\r\n        artist: \"Claude Monet\",\r\n        painting: \"Water Lilies\",\r\n        year: 1919,\r\n        image: \"https://upload.wikimedia.org/wikipedia/commons/9/9e/WLA_metmuseum_Water_Lilies_by_Claude_Monet.jpg\"\r\n    },\r\n    {\r\n        artist: \"Claude Monet\",\r\n        painting: \"Stormy Sea in Étretat\",\r\n        year: 1883,\r\n        medium: \"oil on canvas\",\r\n        dimensions: \"100 cm × 81 cm\",\r\n        image: \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ea/Monet-Mer_agit%C3%A9e_%C3%A0_Etretat-MBA-Lyon.jpg/1280px-Monet-Mer_agit%C3%A9e_%C3%A0_Etretat-MBA-Lyon.jpg\",\r\n        location: \"Musée des Beaux-Arts de Lyon\",\r\n    }\r\n]\r\n\r\nconst ListDemoActionCreator = {\r\n    getLoadingAction(show) {\r\n        return { type: C.IS_LOADING, isLoading: show }\r\n    },\r\n    findMissingItemIndex(items) {\r\n        let missings = []\r\n        virtual_db.forEach((value, index, array) => {\r\n            let found = false\r\n            items.forEach((v, j, a) => {\r\n                if (!found && v.painting === value.painting) {\r\n                    found = true\r\n                }\r\n            })\r\n            if (!found)\r\n                missings.push(index)\r\n        })\r\n        let missingIndex = missings.length > 0 ? missings[0] : -1\r\n        return missingIndex\r\n    },\r\n    addListItem() {\r\n        return (dispatch, getState) => {\r\n            dispatch(this.getLoadingAction(true))   \r\n            let { listItems } = getState().ListDemo\r\n            let missingIndex = this.findMissingItemIndex(listItems)\r\n            setTimeout( () => {\r\n                if (missingIndex >= 0) {\r\n                    // duplicate state to be detectable during deep comparision of states at store, 2019.4.25\r\n                    listItems = JSON.parse(JSON.stringify(listItems))\r\n                    listItems.push(virtual_db[missingIndex])\r\n                    dispatch({ type: C.ADD_ITEM, listItems: listItems })\r\n                    dispatch(this.getLoadingAction(false))\r\n                } else {\r\n                    dispatch(this.getLoadingAction(-1))\r\n                }\r\n            }, 2000) // 1 sec delay to mimic asynchronous operation\r\n        }\r\n    },\r\n    delListItem(id) {\r\n        return { type: C.DEL_ITEM, item_id: id }\r\n    }\r\n}\r\n\r\nexport default ListDemoActionCreator"]},"metadata":{},"sourceType":"module"}